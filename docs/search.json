[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "myblog",
    "section": "",
    "text": "Azure\n\n\nFlask\n\n\nAPI\n\n\n\n\nIn this blog, I am going to show how to deploy a Machine Learning API on Azure App Service (Web App).\n\n\n\n\n\n\nNov 20, 2022\n\n\nShashank Shekhar\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\nnews\n\n\n\n\n\n\n\n\n\n\n\nNov 13, 2022\n\n\nShashank Shekhar\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Welcome To My Blog",
    "section": "",
    "text": "This is start of my bloging journey. I will writing about Deep Learning and this assciated with it. The topics I would like to write about in near future are - Computer Vision, NLP, Machine Learning on Azure Cloud, Deployment of ML Application on Azure Cloud, MLOps.\nWith this I am also takaing a 12-Week Blog Challenge, where ober the course of next 12 Weeks I will be writing - (atleast)1 Blog a week."
  },
  {
    "objectID": "posts/deploy-on-web-app/index.html",
    "href": "posts/deploy-on-web-app/index.html",
    "title": "Deploy ML Application on Azure App Service",
    "section": "",
    "text": "How to create an Azure Web App\nDifference between Azure Web App and App Service.\nDeploy your API on the Azure Web App\nTest your deployment\nBonus: How to connect the front-end to the API running on Web App.\n\nPrerequisites:\n\nAn Flask/FastAPI API is running locally.\nPostman - for API Testing\nAzure Account (Obviously!)\n\nThis is my folder structure. Out of these files 3 are important for deployment.\n\napp.py - Code for API is present here\nres18_10.pth - PyTorch trained model\nrequirement.txt - contains the dependent packages.( If you don’t have this. You can get them doing pip freeze in the virtual environment)\n\nAll these files can be found here if want to look in more details Github repo: https://github.com/shashank2806/simple-classifier-demo\n\n\n\nFiles in the directory\n\n\n\nStep 0 : Test the API locally.\n\nTest the API in the virtual environment you have developed it. If you have not developed it in a virtual environment, I would strongly suggest that you create one and install all the dependencies into it using requirements.txt.\nTest it on postman.\n\nThis is my API running locally on postman, it has route named ‘/pred’ which takes images as from-data.\nThis is the response when I upload this image of the cat. The model predicts it is a cat, cool.\n\n\n\nInput image of cat\n\n\nAs I have tested the API on my machine. Now it is ready for deployment. \n\n\nStep - 1: Create Azure Resources\nI am now going to create an Azure web app. A web app is the quickest method to deploy your APIs on the cloud. It supports both code and docker containers. In this blog, we are focusing on deployment through code.\n\n\n\n\n\nCreate a web app on the Azure portal. Select the subscription and Resource Group. You need to give it a unique name. Select OS and your python version. In my case, I have selected 3.10. Select the region.\nNow we have to select a app service plan. Most people have confusion between web app and app service.(Even both terms are used interchangeably) App service is the hardware on which you web app is deployed. Single App service can host multiple web apps. Keep this in mind when selecting your app service plan. I am selecting B1 plan, which is capable enough to host this API.\n \nClick Review+Create\nThe web app is created. A URL is also assigned - https://pytorch-demo.azurewebsites.net/\nThis is the URL where the web app will be hosted, There is nothing there right now.\n\n\n\n\n\n\n\nStep 2: Push code to the Web App\n\nOn the Azure Portal, go to the Deployment centre and select local git as the deployment source. You will get the git clone path, and username and password in the Credentials tab. Tip: The username is just ${web app name}, in my case $pytorch-demo, Do not enter the full username provided. \nGo to the directory containing the code. You can also test it on my demo code. Clone the github repo using git clone https://github.com/shashank2806/simple-classifier-demo.git You need git to be initialised (git init) in the directory, and commit (git commit) the changes you want to be uploaded.\nAdd a new remote to push code. I had initially one remote(origin) pointing to my Github. I have added new remote named azure which connects to web app. Use git remote add <git-clone-uri> to add remote. \nNow push the code to Azure using - git push azure master \nNow wait for few minutes, you can see the logs on the screen. Wait until the deployment succeeds.\n\nVoila The deplyment to the cloud is done! Now we can test it on postman.\n\n\n\n\n\nGreat!! As you can see, We have deployed the API over the cloud, now anyone can access it. We just need to give the user Endpoint and Key.\n\n\nStep 3: Bonus- Connect it with the front-end.\nWe have deployed our backend API on the web app. As you may have noticed there is an index.html in the directory. This contains a very simple front-end. We can connect the back-end API to the front-end.\nThe index.html is hosted through GitHub Pages(free hosting). The the hosted URL is https://shashankshekhar.me/simple-classifier-demo/\nIf you look into index.html, You will find a JavaScript - Fetch is used for calling the API. (You can get the code snippet to connect with help of postman.)\n    var requestOptions = {\n        method: \"POST\",\n        body: formData,\n        redirect: \"follow\",\n    };\n\n    // Change endpoint here\n    fetch(\"https://pytorch-demo.azurewebsites.net/pred\", requestOptions)\nYou can make some minor changes on this front-end to tailor it to your need. I have changed the Endpoint URL to the web app.\nLet’s try with our cat image. On this front-end.\n Voila! We have got the result, The API is taking to the font-end, the request we are making on our web browser is going to our API and fetching the results from there.\nThe API might not be responsing by the time you are looking at this web page - I will delete the App Service later.\n\n\nFinal Words\nWe now know:\n\nHow to deploy your API on the Azure app service\nTest the API through Postman\nHow to connect it to the front end. (or how to communicate with the frontend engineer about your ML API. Give them, endpoints, routes and keys/schema)\n\nThis method will work in most cases, where there are not complex dependencies, sometimes, there are OS-based dependencies for which we will have to deploy through Docker.\nEnjoy. Happy Learning!!!"
  }
]